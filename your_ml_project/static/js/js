document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("predictForm");
  const result = document.getElementById("result");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const yearInput = document.getElementById("yearInput").value;

    fetch("/predict", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ year: yearInput })
    })
      .then(response => {
        if (!response.ok) {
          throw new Error("Prediction request failed.");
        }
        return response.json();
      })
      .then(data => {
        result.innerText = `Predicted EV Sales for ${yearInput}: ${data.predicted_sales.toFixed(2)} Million`;
      })
      .catch(error => {
        console.error("Error:", error);
        result.innerText = "Error getting prediction. Please try again.";
      });
  });
});
